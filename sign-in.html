<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Sign In</title>
  
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Vazirmatn:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  
  <style>
    :root {
      --bg-primary: #f9fafb;
      --bg-secondary: white;
      --text-primary: #111827;
      --text-secondary: #374151;
      --text-muted: #6b7280;
      --border-primary: #d1d5db;
      --border-focus: #3b82f6;
      --accent-primary: #111827;
      --accent-hover: #1f2937;
      --shadow-primary: rgba(0, 0, 0, 0.1);
      --shadow-focus: rgba(59, 130, 246, 0.1);
      --divider: #e5e7eb;
      --social-bg: white;
      --social-border: #d1d5db;
      --social-hover: #f3f4f6;
      --social-hover-border: #3b82f6;
      --error-color: #ef4444;
      --success-color: #10b981;
    }

    body.dark-mode {
      --bg-primary: #111827;
      --bg-secondary: #1f2937;
      --text-primary: #f9fafb;
      --text-secondary: #f9fafb;
      --text-muted: #9ca3af;
      --border-primary: #4b5563;
      --border-focus: #60a5fa;
      --accent-primary: #3b82f6;
      --accent-hover: #2563eb;
      --shadow-primary: rgba(0, 0, 0, 0.3);
      --shadow-focus: rgba(96, 165, 250, 0.1);
      --divider: #374151;
      --social-bg: #374151;
      --social-border: #4b5563;
      --social-hover: #4b5563;
      --social-hover-border: #60a5fa;
      --error-color: #f87171;
      --success-color: #34d399;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
    }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    body.dark-mode .sun-icon {
      display: none;
    }
    body.dark-mode .moon-icon {
      display: block;
    }
    .sun-icon {
      display: block;
    }
    .moon-icon {
      display: none;
    }

    /* NAVBAR STYLES */
    header {
      background: var(--bg-secondary);
      box-shadow: 0 2px 4px var(--shadow-primary);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    nav {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .logo {
      font-size: 24px;
      font-weight: 600;
      color: var(--text-primary);
    }
    .logo a {
        text-decoration: none;
        color: inherit;
    }
    .nav-links {
      display: flex;
      align-items: center;
      gap: 24px;
    }
    .nav-links a {
      text-decoration: none;
      color: var(--text-muted);
      font-size: 16px;
      font-weight: 500;
      transition: color 0.2s ease;
    }
    .nav-links a:hover {
      color: var(--border-focus);
    }
    .nav-control {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    .nav-icon {
      width: 24px;
      height: 24px;
      fill: var(--text-muted);
      transition: fill 0.2s ease;
    }
    .nav-icon:hover {
      fill: var(--border-focus);
    }
    .theme-toggle {
      background: none;
      border: none;
      cursor: pointer;
      padding: 0;
    }
    
    .language-select-wrapper {
        position: relative;
        display: flex;
        align-items: center;
    }
    .language-dropdown-icon {
        cursor: pointer;
        padding: 4px;
        border-radius: 8px;
        transition: background-color 0.2s ease, transform 0.2s ease;
    }
    .language-dropdown-icon:hover {
      background-color: var(--social-hover);
      transform: scale(1.05);
    }
    .language-dropdown {
        position: absolute;
        top: 100%;
        left: 0;
        margin-top: 12px;
        background-color: var(--bg-secondary);
        border: 1px solid var(--border-primary);
        border-radius: 8px;
        box-shadow: 0 4px 12px var(--shadow-primary);
        z-index: 10;
        padding: 8px 0;
        min-width: 120px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(10px) scale(0.95);
        transition: opacity 0.2s ease, transform 0.2s ease, visibility 0s 0.2s;
    }
    .language-dropdown.active {
        opacity: 1;
        visibility: visible;
        transform: translateY(0) scale(1);
        transition-delay: 0s;
    }
    .language-dropdown-item {
        display: block;
        padding: 8px 16px;
        font-size: 16px;
        color: var(--text-primary);
        text-decoration: none;
        cursor: pointer;
        transition: background-color 0.2s ease, color 0.2s ease;
    }
    .language-dropdown-item:hover {
        background-color: var(--social-hover);
        color: var(--text-primary);
    }

    /* FORM STYLES */
    main {
      flex: 1 0 auto;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 32px 16px;
    }
    .form-container {
      width: 100%;
      max-width: 400px;
      padding: 32px;
      background: var(--bg-secondary);
      border-radius: 16px;
      box-shadow: 0 10px 25px var(--shadow-primary);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(0, 0, 0, 0.05);
    }
    h1 {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 24px;
      text-align: center;
      letter-spacing: -0.02em;
      line-height: 1.3;
    }

    /* Form Fields */
    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 8px;
      color: var(--text-secondary);
    }
    input[type="email"],
    input[type="password"],
    input[type="text"] {
      width: 100%;
      padding: 12px 40px 12px 16px;
      border: 1px solid var(--border-primary);
      border-radius: 8px;
      font-size: 16px;
      background-color: var(--bg-secondary);
      color: var(--text-primary);
      outline: none;
      transition: all 0.2s ease;
    }
    input[type="email"]:focus,
    input[type="password"]:focus,
    input[type="text"]:focus {
      border-color: var(--border-focus);
      box-shadow: 0 0 0 3px var(--shadow-focus);
    }
    input::placeholder {
      color: var(--text-muted);
    }

    /* Password Wrapper */
    .password-wrapper {
      position: relative;
    }
    .toggle-password {
      position: absolute;
      right: 16px;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      cursor: pointer;
      color: var(--text-muted);
      font-size: 16px;
      padding: 0;
      transition: color 0.2s ease;
    }
    .toggle-password:hover {
      color: var(--text-primary);
    }
    .toggle-password:focus {
      outline: 2px solid var(--border-focus);
      outline-offset: 2px;
    }

    /* Error Messages */
    .error-message {
      display: none;
      font-size: 12px;
      color: var(--error-color);
      margin-top: 4px;
    }
    .error-message.visible {
      display: block;
    }
    input.invalid {
      border-color: var(--error-color);
    }

    /* Links & Buttons */
    .forgot-password {
      text-align: right;
      margin-top: -8px;
      margin-bottom: 20px;
    }
    .forgot-password a {
      font-size: 14px;
      color: var(--text-muted);
      text-decoration: none;
    }
    .forgot-password a:hover {
      color: var(--border-focus);
    }
    button[type="submit"] {
      width: 100%;
      padding: 12px;
      background-color: var(--accent-primary);
      color: var(--bg-secondary);
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s ease;
      box-shadow: 0 2px 4px var(--shadow-primary);
    }
    button[type="submit"]:hover {
      background-color: var(--accent-hover);
    }
    button[type="submit"]:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    /* Message Styles */
    .message {
      padding: 12px;
      margin: 16px 0;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
    }
    .message.success {
      background-color: var(--success-color);
      color: white;
    }
    .message.error {
      background-color: var(--error-color);
      color: white;
    }

    /* Divider */
    .divider {
      display: flex;
      align-items: center;
      margin: 24px 0;
      color: var(--text-muted);
      font-size: 14px;
    }
    .divider::before,
    .divider::after {
      content: '';
      flex: 1;
      height: 1px;
      background-color: var(--divider);
    }
    .divider span {
      padding: 0 12px;
    }

    /* Social Login */
    .social-login {
      display: flex;
      gap: 12px;
    }
    .social-btn {
      flex: 1;
      padding: 12px;
      border: 1px solid var(--social-border);
      background: var(--social-bg);
      border-radius: 8px;
      font-size: 16px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      color: var(--text-primary);
      transition: all 0.2s ease;
    }
    .social-btn:hover {
      background-color: var(--social-hover);
      border-color: var(--social-hover-border);
    }

    /* Sign Up Link */
    .signup-link {
      text-align: center;
      margin-top: 24px;
      font-size: 14px;
      color: var(--text-muted);
    }
    .signup-link a {
      color: var(--border-focus);
      text-decoration: none;
    }
    .signup-link a:hover {
      text-decoration: underline;
    }

    /* FOOTER STYLES */
    footer {
      flex-shrink: 0;
      background: var(--bg-secondary);
      box-shadow: 0 -2px 4px var(--shadow-primary);
      padding: 5px 32px;
      text-align: center;
      width: 100%;
    }
    .footer-content {
      max-width: 1200px;
      margin: 0 auto;
    }
    .footer-title {
      font-size: 18px;
      font-weight: 500;
      margin-bottom: 16px;
      color: var(--text-secondary);
    }
    .social-links {
      display: flex;
      justify-content: center;
      gap: 24px;
    }
    .social-link img {
      width: 32px;
      height: 32px;
      transition: transform 0.2s ease;
    }
    .social-link:hover img {
      transform: scale(1.1);
    }

    /* RTL SUPPORT */
    body[dir="rtl"] {
      font-family: 'Vazirmatn', sans-serif;
    }
    body[dir="rtl"] nav,
    body[dir="rtl"] .form-container,
    body[dir="rtl"] footer {
      text-align: right;
      direction: rtl;
    }
    body[dir="rtl"] .nav-links {
      flex-direction: row;
    }
    body[dir="rtl"] .language-dropdown {
      left: auto;
      right: 0;
    }
    body[dir="rtl"] .forgot-password {
      text-align: left;
    }
    body[dir="rtl"] .toggle-password {
      right: auto;
      left: 16px;
    }
    body[dir="rtl"] input[type="email"],
    body[dir="rtl"] input[type="password"],
    body[dir="rtl"] input[type="text"] {
      padding: 12px 16px 12px 40px;
    }

    /* RESPONSIVE STYLES */
    @media (max-width: 768px) {
      nav {
        flex-direction: column;
        gap: 16px;
      }
      .nav-links {
        flex-wrap: wrap;
        justify-content: center;
        gap: 16px;
      }
    }
    @media (max-width: 480px) {
      nav {
        padding: 16px;
      }
      .logo {
        font-size: 20px;
      }
      .nav-links a {
        font-size: 14px;
      }
      .form-container {
        padding: 24px;
      }
      h1 {
        font-size: 22px;
        margin-bottom: 20px;
      }
      .form-group {
        margin-bottom: 16px;
      }
      label {
        font-size: 14px;
      }
      input[type="email"],
      input[type="password"],
      input[type="text"] {
        padding: 12px 40px 12px 16px;
        font-size: 16px;
      }
      button[type="submit"] {
        padding: 12px;
        font-size: 16px;
      }
      .social-login {
        gap: 8px;
      }
      .social-btn {
        padding: 12px;
        font-size: 15px;
      }
      .divider {
        margin: 20px 0;
        font-size: 13px;
      }
      .signup-link {
        font-size: 14px;
        margin-top: 20px;
      }
    }
  </style>
</head>
<body>
  <!-- NAVBAR -->
  <header>
    <nav>
      <div class="logo">
        <a href="index.html" id="logo">Smartify24</a>
      </div>
      <div class="nav-links">
        <a href="index.html" id="homeLink">Home</a>
        <a href="about.html" id="aboutLink">About</a>
        <a href="contact.html" id="contactLink">Contact</a>
        <a href="sign-in.html" id="signInLink">Sign in</a>
        <a href="sign-up.html" id="signUpLink">Sign up</a>
        <button class="theme-toggle" id="darkModeToggle" aria-label="Toggle dark mode">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="nav-icon sun-icon" viewBox="0 0 16 16">
            <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"/>
          </svg>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="nav-icon moon-icon" viewBox="0 0 16 16">
            <path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278M4.858 1.311A7.269 7.269 0 0 0 1.025 7.71c0 4.02 3.279 7.276 7.319 7.276a7.316 7.316 0 0 0 5.205-2.119c-.504.014-1.004.03-1.5.03-3.419 0-6.393-2.3-7.302-5.41A7.312 7.312 0 0 0 4.858 1.311z"/>
          </svg>
        </button>
        <div class="language-select-wrapper" id="languageWrapper">
          <div class="language-dropdown-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="nav-icon" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2h1v1.93h-1zm6.93-2.52c-.42 1.42-1.63 2.49-3.09 2.82V19h-1V6.16c3.16.78 5.61 3.53 5.61 6.84 0 1.25-.37 2.41-1.03 3.41zM11 4.07V5h1v-1.93c.96-.06 1.9-.06 2.8-.02l-6.84 3.39c-.11-.02-.23-.04-.34-.07C7.63 6.07 7 7.01 7 8.01c0 .4.07.79.2 1.16L4.21 11.2C4.08 10.62 4 10.01 4 9.38c0-2.85 1.66-5.32 4.07-6.53zM18.8 14.8C18.42 13.9 18 12.98 18 12c0-.5-.03-.99-.08-1.48l-5.74 5.74v-1.95c.57-.22 1.07-.5 1.5-.83l-2.67-2.67c-.24-.24-.39-.56-.39-.91 0-.69.56-1.25 1.25-1.25s1.25.56 1.25 1.25c0 .35-.15.67-.39.91l-2.67 2.67c-.33-.43-.61-.93-.83-1.5L9.52 4.08C9.03 4.14 8.53 4.17 8.04 4.17c-1.12 0-2.18-.28-3.12-.76L16.09 3.01c2.09.52 3.73 2.22 3.91 4.34-.14.28-.27.57-.40.86L18.8 14.8z"/>
            </svg>
          </div>
          <div class="language-dropdown" id="languageDropdown">
            <a href="#" class="language-dropdown-item" data-lang="en">English</a>
            <a href="#" class="language-dropdown-item" data-lang="fa">ŸÅÿßÿ±ÿ≥€å</a>
          </div>
        </div>
      </div>
    </nav>
  </header>

  <!-- MAIN CONTENT -->
  <main>
    <div class="form-container">
      <h1 id="title">Sign in to your account</h1>
      
      <!-- Message Container -->
      <div id="messageContainer"></div>
      
      <form id="loginForm">
        <div class="form-group">
          <label for="usernameEmail" id="emailLabel">Email / Username</label>
          <input type="text" id="usernameEmail" placeholder="you@example.com or username" required aria-required="true" />
          <span class="error-message" id="usernameEmailError"></span>
        </div>
        <div class="form-group">
          <label for="password" id="passwordLabel">Password</label>
          <div class="password-wrapper">
            <input type="password" id="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required aria-required="true" />
            <button type="button" class="toggle-password" id="togglePassword" aria-label="Toggle password visibility">üëÅÔ∏è</button>
          </div>
          <span class="error-message" id="passwordError"></span>
        </div>
        <div class="forgot-password">
          <a href="#" id="forgotLink">Forgot password?</a>
        </div>
        <button type="submit" id="signInButton">Sign in</button>
      </form>

      <div class="divider"><span id="orText">or continue with</span></div>

      <div class="social-login">
        <button class="social-btn" aria-label="Sign in with Google">Google</button>
      </div>

      <p class="signup-link" id="signupLink">
        <span id="noAccountText">Don't have an account?</span> <a href="sign-up.html" id="signUpLinkText">Sign up</a>
      </p>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="footer-content">
      <h3 class="footer-title" id="contactTitle">Contact Us</h3>
      <div class="social-links">
        <a href="  https://github.com/mahmoud-sadrian  " class="social-link" target="_blank" rel="noopener noreferrer" aria-label="GitHub profile">
          <img src="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png  " alt="GitHub" width="32" height="32">
        </a>
        <a href="https://www.linkedin.com/in/mahmood-sadriyan/  " class="social-link" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn profile">
          <img src="https://upload.wikimedia.org/wikipedia/commons/c/ca/LinkedIn_logo_initials.png  " alt="LinkedIn" width="32" height="32">
        </a>
      </div>
    </div>
  </footer>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const darkModeToggle = document.getElementById('darkModeToggle');
      const body = document.body;
      const togglePassword = document.getElementById('togglePassword');
      const passwordInput = document.getElementById('password');
      const loginForm = document.getElementById('loginForm');
      const messageContainer = document.getElementById('messageContainer');

      const langWrapper = document.getElementById('languageWrapper');
      const langDropdown = document.getElementById('languageDropdown');
      const langItems = document.querySelectorAll('.language-dropdown-item');

      const texts = {
        en: {
          logo: "Smartify24",
          homeLink: "Home",
          aboutLink: "About",
          contactLink: "Contact",
          signInLink: "Sign in",
          signUpLink: "Sign up",
          title: "Sign in to your account",
          emailLabel: "Email / Username",
          passwordLabel: "Password",
          forgotLink: "Forgot password?",
          signInButton: "Sign in",
          orText: "or continue with",
          noAccountText: "Don't have an account?",
          signUpLinkText: "Sign up",
          contactTitle: "Contact Us",
          emailPlaceholder: "you@example.com or username",
          passwordPlaceholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
          emailRequired: "Email or username is required",
          passwordRequired: "Password is required",
          signingIn: "Signing in...",
          loginSuccess: "Login successful! Redirecting...",
          loginFailed: "Login failed",
          networkError: "Network error",
          invalidCredentials: "Invalid username or password",
          redirectingAdmin: "Admin detected! Redirecting to admin dashboard..."
        },
        fa: {
          logo: "Smartify24",
          homeLink: "ÿÆÿßŸÜŸá",
          aboutLink: "ÿØÿ±ÿ®ÿßÿ±Ÿá",
          contactLink: "ÿ™ŸÖÿßÿ≥",
          signInLink: "Ÿàÿ±ŸàÿØ",
          signUpLink: "ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ",
          title: "Ÿàÿ±ŸàÿØ ÿ®Ÿá ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å",
          emailLabel: "ÿß€åŸÖ€åŸÑ / ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å",
          passwordLabel: "ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ±",
          forgotLink: "ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿÆŸàÿØ ÿ±ÿß ŸÅÿ±ÿßŸÖŸàÿ¥ ⁄©ÿ±ÿØŸá‚Äåÿß€åÿØÿü",
          signInButton: "Ÿàÿ±ŸàÿØ",
          orText: "€åÿß ÿßÿØÿßŸÖŸá ÿ®ÿß",
          noAccountText: "ÿ≠ÿ≥ÿßÿ® ⁄©ÿßÿ±ÿ®ÿ±€å ŸÜÿØÿßÿ±€åÿØÿü",
          signUpLinkText: "ÿ´ÿ®ÿ™‚ÄåŸÜÿßŸÖ",
          contactTitle: "ÿ™ŸÖÿßÿ≥ ÿ®ÿß ŸÖÿß",
          emailPlaceholder: "you@example.com €åÿß ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å",
          passwordPlaceholder: "‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢",
          emailRequired: "ÿß€åŸÖ€åŸÑ €åÿß ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å ÿßŸÑÿ≤ÿßŸÖ€å ÿßÿ≥ÿ™",
          passwordRequired: "ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ÿßŸÑÿ≤ÿßŸÖ€å ÿßÿ≥ÿ™",
          signingIn: "ÿØÿ± ÿ≠ÿßŸÑ Ÿàÿ±ŸàÿØ...",
          loginSuccess: "Ÿàÿ±ŸàÿØ ŸÖŸàŸÅŸÇ€åÿ™‚Äåÿ¢ŸÖ€åÿ≤ ÿ®ŸàÿØ! ÿØÿ± ÿ≠ÿßŸÑ ÿßŸÜÿ™ŸÇÿßŸÑ...",
          loginFailed: "ÿÆÿ∑ÿß ÿØÿ± Ÿàÿ±ŸàÿØ",
          networkError: "ÿÆÿ∑ÿß ÿØÿ± ÿßÿ±ÿ™ÿ®ÿßÿ∑ ÿ®ÿß ÿ≥ÿ±Ÿàÿ±",
          invalidCredentials: "ŸÜÿßŸÖ ⁄©ÿßÿ±ÿ®ÿ±€å €åÿß ÿ±ŸÖÿ≤ ÿπÿ®Ÿàÿ± ŸÜÿßŸÖÿπÿ™ÿ®ÿ± ÿßÿ≥ÿ™",
          redirectingAdmin: "⁄©ÿßÿ±ÿ®ÿ± ÿßÿØŸÖ€åŸÜ ÿ¥ŸÜÿßÿ≥ÿß€å€å ÿ¥ÿØ! ÿØÿ± ÿ≠ÿßŸÑ ÿßŸÜÿ™ŸÇÿßŸÑ ÿ®Ÿá ŸæŸÜŸÑ ŸÖÿØ€åÿ±€åÿ™..."
        }
      };

      const elements = {
        logo: document.getElementById('logo'),
        homeLink: document.getElementById('homeLink'),
        aboutLink: document.getElementById('aboutLink'),
        contactLink: document.getElementById('contactLink'),
        signInLink: document.getElementById('signInLink'),
        signUpLink: document.getElementById('signUpLink'),
        title: document.getElementById('title'),
        emailLabel: document.getElementById('emailLabel'),
        passwordLabel: document.getElementById('passwordLabel'),
        forgotLink: document.getElementById('forgotLink'),
        signInButton: document.getElementById('signInButton'),
        orText: document.getElementById('orText'),
        noAccountText: document.getElementById('noAccountText'),
        signUpLinkText: document.getElementById('signUpLinkText'),
        contactTitle: document.getElementById('contactTitle'),
        usernameEmailInput: document.getElementById('usernameEmail'),
        passwordInput: document.getElementById('password'),
        usernameEmailError: document.getElementById('usernameEmailError'),
        passwordError: document.getElementById('passwordError')
      };

      function applyLanguage(lang) {
        Object.keys(texts[lang]).forEach(key => {
          if (key === 'emailPlaceholder') {
            elements.usernameEmailInput.placeholder = texts[lang][key];
          } else if (key === 'passwordPlaceholder') {
            elements.passwordInput.placeholder = texts[lang][key];
          } else if (key === 'signUpLinkText') {
            elements.signUpLinkText.textContent = texts[lang][key];
          } else if (elements[key]) {
            elements[key].textContent = texts[lang][key];
          }
        });

        body.setAttribute('dir', lang === 'fa' ? 'rtl' : 'ltr');
        document.documentElement.lang = lang;
      }

      function showMessage(message, type = 'info') {
        messageContainer.innerHTML = `
          <div class="message ${type}">${message}</div>
        `;
        
        if (type !== 'success') {
          setTimeout(() => {
            messageContainer.innerHTML = '';
          }, 5000);
        }
      }

      // Toggle password visibility
      togglePassword.addEventListener('click', () => {
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        togglePassword.textContent = type === 'password' ? 'üëÅÔ∏è' : 'üôà';
      });

      const savedLang = localStorage.getItem('uiLanguage') || 'en';
      const isDarkMode = localStorage.getItem('darkMode') === 'true';

      if (isDarkMode) {
        body.classList.add('dark-mode');
      }
      applyLanguage(savedLang);

      darkModeToggle.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        localStorage.setItem('darkMode', body.classList.contains('dark-mode'));
      });
      
      langWrapper.addEventListener('click', (event) => {
        event.stopPropagation();
        langDropdown.classList.toggle('active');
      });

      langItems.forEach(item => {
        item.addEventListener('click', (event) => {
          event.preventDefault();
          const selectedLang = item.getAttribute('data-lang');
          applyLanguage(selectedLang);
          localStorage.setItem('uiLanguage', selectedLang);
          langDropdown.classList.remove('active');
        });
      });

      document.addEventListener('click', (event) => {
        if (!langWrapper.contains(event.target)) {
          langDropdown.classList.remove('active');
        }
      });

      // Form submission
      loginForm.addEventListener('submit', async (event) => {
        event.preventDefault();
        
        document.querySelectorAll('.error-message').forEach(el => {
          el.classList.remove('visible');
          el.textContent = '';
        });
        document.querySelectorAll('input').forEach(el => el.classList.remove('invalid'));

        let isValid = true;
        const currentLang = localStorage.getItem('uiLanguage') || 'en';

        const usernameEmailValue = elements.usernameEmailInput.value.trim();
        if (!usernameEmailValue) {
          isValid = false;
          elements.usernameEmailError.textContent = texts[currentLang].emailRequired;
          elements.usernameEmailError.classList.add('visible');
          elements.usernameEmailInput.classList.add('invalid');
        }

        const passwordValue = elements.passwordInput.value.trim();
        if (!passwordValue) {
          isValid = false;
          elements.passwordError.textContent = texts[currentLang].passwordRequired;
          elements.passwordError.classList.add('visible');
          elements.passwordInput.classList.add('invalid');
        }

        if (!isValid) return;

        const submitButton = elements.signInButton;
        const originalText = submitButton.textContent;
        submitButton.textContent = texts[currentLang].signingIn;
        submitButton.disabled = true;

        try {
          console.log('ÿßÿ±ÿ≥ÿßŸÑ ÿØÿ±ÿÆŸàÿßÿ≥ÿ™ Ÿàÿ±ŸàÿØ ÿ®Ÿá API...');
          
          const response = await fetch('api.php?action=signin', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: JSON.stringify({
              username: usernameEmailValue,
              password: passwordValue
            })
          });

          console.log('Ÿæÿßÿ≥ÿÆ API:', response.status);

          const data = await response.json();
          console.log('ÿØÿßÿØŸá‚ÄåŸáÿß€å Ÿæÿßÿ≥ÿÆ:', data);

          if (response.ok && data.userId) {
              console.log('Ÿàÿ±ŸàÿØ ŸÖŸàŸÅŸÇ - ÿ∞ÿÆ€åÿ±Ÿá ÿßÿ∑ŸÑÿßÿπÿßÿ™ ÿØÿ± localStorage');
    
              localStorage.setItem('user_id', data.userId);
              localStorage.setItem('username', data.username);
              localStorage.setItem('isLoggedIn', 'true');
              localStorage.setItem('loginTime', new Date().getTime());
              localStorage.setItem('role', data.role || 'user');

              if (data.apiKey) {
                  localStorage.setItem('api_key', data.apiKey);
              } else {
                  showMessage("API Key not received!", "error");
                  submitButton.textContent = originalText;
                  submitButton.disabled = false;
                  return;
              }

              if (data.role === 'admin') {
                  localStorage.setItem('isAdmin', 'true');
                  showMessage(texts[currentLang].redirectingAdmin, 'success');
        
                  setTimeout(() => {
                      window.location.href = 'admin_dashboard.html';
                  }, 1500);
              } else {
                  localStorage.setItem('isAdmin', 'false');
                  showMessage(texts[currentLang].loginSuccess, 'success');
        
                  setTimeout(() => {
                      window.location.href = 'dashboard.html';
                  }, 1000);
              }
          }
          else {
            const errorMessage = data.error || texts[currentLang].invalidCredentials;
            console.log('ÿÆÿ∑ÿß ÿØÿ± Ÿàÿ±ŸàÿØ:', errorMessage);
            showMessage(errorMessage, 'error');
          }

        } catch (error) {
          console.error('ÿÆÿ∑ÿß€å ÿ¥ÿ®⁄©Ÿá:', error);
          showMessage(texts[currentLang].networkError, 'error');
        } finally {
          submitButton.textContent = originalText;
          submitButton.disabled = false;
        }
      });

      const isLoggedIn = localStorage.getItem('isLoggedIn');
      if (isLoggedIn === 'true') {
        const currentLang = localStorage.getItem('uiLanguage') || 'en';
        showMessage(
          currentLang === 'fa' ? 'ÿ¥ŸÖÿß ŸÇÿ®ŸÑÿßŸã Ÿàÿßÿ±ÿØ ÿ¥ÿØŸá‚Äåÿß€åÿØ!' : 'You are already logged in!', 
          'info'
        );
      }
    });
  </script>
</body>
</html>